{"version":3,"sources":["../src/reducers.ts"],"names":["stateReducer$","state","action","type","sites","map","site","id","error"],"mappings":";;;;;;;AAAA;;;;;;;;AAoBO,IAAMA,aAAa,GAAG,qBAAK,CAACC,KAAD,EAAeC,MAAf,KAAkC;AAClE,UAAQA,MAAM,CAACC,IAAf;AACE,SAAK,UAAL;AACE,6CAAWF,KAAX;AAAkBG,QAAAA,KAAK,EAAEF,MAAM,CAACE,KAAP,IAAgB;AAAzC;;AACF,SAAK,gBAAL;AACE,6CACKH,KADL;AAEEG,QAAAA,KAAK,EAAEH,KAAK,CAACG,KAAN,CAAYC,GAAZ,CAAiBC,IAAD,IAAgB;AACrC,cAAIJ,MAAM,CAACI,IAAP,IAAeA,IAAI,CAACC,EAAL,KAAYL,MAAM,CAACI,IAAP,CAAYC,EAA3C,EAA+C;AAC7C,qCAAWD,IAAX;AACD;;AACD,iBAAOA,IAAP;AACD,SALM;AAFT;;AASF,SAAK,eAAL;AACE,6CACKL,KADL;AAEEO,QAAAA,KAAK,EAAEN,MAAM,CAACM;AAFhB;;AAIF,SAAK,kBAAL;AACE,6CACKP,KADL;AAEEG,QAAAA,KAAK,EAAEH,KAAK,CAACG,KAAN,CAAYC,GAAZ,CAAiBC,IAAD,IAAgB;AACrC,cAAIJ,MAAM,CAACI,IAAP,IAAeA,IAAI,CAACC,EAAL,KAAYL,MAAM,CAACI,IAAP,CAAYC,EAA3C,EAA+C;AAC7C,mDAAWD,IAAX;AAAiBE,cAAAA,KAAK,EAAEN,MAAM,CAACM;AAA/B;AACD;;AACD,iBAAOF,IAAP;AACD,SALM;AAFT;;AASF;AACE,aAAOL,KAAP;AA7BJ;AA+BD,CAhC4B,CAAtB","sourcesContent":["import {scan} from 'rxjs/operators'\nimport {Site} from './types'\n\ninterface Deployment {\n  id: string\n}\n\ninterface Action {\n  type: string\n  sites?: Site[]\n  site?: Site\n  error?: Error\n  deployments?: Deployment[]\n}\n\ninterface State {\n  sites: Site[]\n  action: Action\n}\n\nexport const stateReducer$ = scan((state: State, action: Action) => {\n  switch (action.type) {\n    case 'setSites':\n      return {...state, sites: action.sites || []}\n    case 'deploy/started':\n      return {\n        ...state,\n        sites: state.sites.map((site: Site) => {\n          if (action.site && site.id === action.site.id) {\n            return {...site}\n          }\n          return site\n        }),\n      }\n    case 'deploy/failed':\n      return {\n        ...state,\n        error: action.error,\n      }\n    case 'deploy/completed':\n      return {\n        ...state,\n        sites: state.sites.map((site: Site) => {\n          if (action.site && site.id === action.site.id) {\n            return {...site, error: action.error}\n          }\n          return site\n        }),\n      }\n    default:\n      return state\n  }\n})\n"],"file":"reducers.js"}